{"ast":null,"code":"var _s = $RefreshSig$();\nimport { get, getDatabase, limitToFirst, orderByKey, query, ref, startAt } from \"firebase/database\";\nimport { useEffect, useState } from \"react\";\nexport default function useVideoList(page) {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [videos, setVideos] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n  useEffect(() => {\n    async function fetchVideos() {\n      // database related works\n      const db = getDatabase();\n      const videosRef = ref(db, \"videos\");\n      const videoQuery = query(videosRef, orderByKey(), startAt(\"\" + page), limitToFirst(8));\n      try {\n        setError(false);\n        setLoading(true);\n        // request firebase database\n        const snapshot = await get(videoQuery);\n        setLoading(false);\n        if (snapshot.exists()) {\n          setVideos(prevVideos => {\n            return [...prevVideos, ...Object.values(snapshot.val())];\n          });\n        } else {\n          setHasMore(false);\n        }\n      } catch (err) {\n        console.log(err);\n        setLoading(false);\n        setError(true);\n      }\n    }\n    fetchVideos();\n  }, [page]);\n  return {\n    loading,\n    error,\n    videos,\n    hasMore\n  };\n}\n_s(useVideoList, \"51k/9QOjAQqhJ3q4Ia+3VDiwqsQ=\");","map":{"version":3,"names":["get","getDatabase","limitToFirst","orderByKey","query","ref","startAt","useEffect","useState","useVideoList","page","_s","loading","setLoading","error","setError","videos","setVideos","hasMore","setHasMore","fetchVideos","db","videosRef","videoQuery","snapshot","exists","prevVideos","Object","values","val","err","console","log"],"sources":["/home/user/react/lws/react-quiz/src/hooks/useVideoList.js"],"sourcesContent":["import {\n  get,\n  getDatabase,\n  limitToFirst,\n  orderByKey,\n  query,\n  ref,\n  startAt,\n} from \"firebase/database\";\nimport { useEffect, useState } from \"react\";\n\nexport default function useVideoList(page) {\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [videos, setVideos] = useState([]);\n  const [hasMore, setHasMore] = useState(true);\n\n  useEffect(() => {\n    async function fetchVideos() {\n      // database related works\n      const db = getDatabase();\n      const videosRef = ref(db, \"videos\");\n      const videoQuery = query(\n        videosRef,\n        orderByKey(),\n        startAt(\"\" + page),\n        limitToFirst(8)\n      );\n\n      try {\n        setError(false);\n        setLoading(true);\n        // request firebase database\n        const snapshot = await get(videoQuery);\n        setLoading(false);\n        if (snapshot.exists()) {\n          setVideos((prevVideos) => {\n            return [...prevVideos, ...Object.values(snapshot.val())];\n          });\n        } else {\n          setHasMore(false);\n        }\n      } catch (err) {\n        console.log(err);\n        setLoading(false);\n        setError(true);\n      }\n    }\n\n    fetchVideos();\n  }, [page]);\n\n  return {\n    loading,\n    error,\n    videos,\n    hasMore,\n  };\n}\n"],"mappings":";AAAA,SACEA,GAAG,EACHC,WAAW,EACXC,YAAY,EACZC,UAAU,EACVC,KAAK,EACLC,GAAG,EACHC,OAAO,QACF,mBAAmB;AAC1B,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,eAAe,SAASC,YAAYA,CAACC,IAAI,EAAE;EAAAC,EAAA;EACzC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACM,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACd,eAAea,WAAWA,CAAA,EAAG;MAC3B;MACA,MAAMC,EAAE,GAAGpB,WAAW,CAAC,CAAC;MACxB,MAAMqB,SAAS,GAAGjB,GAAG,CAACgB,EAAE,EAAE,QAAQ,CAAC;MACnC,MAAME,UAAU,GAAGnB,KAAK,CACtBkB,SAAS,EACTnB,UAAU,CAAC,CAAC,EACZG,OAAO,CAAC,EAAE,GAAGI,IAAI,CAAC,EAClBR,YAAY,CAAC,CAAC,CAChB,CAAC;MAED,IAAI;QACFa,QAAQ,CAAC,KAAK,CAAC;QACfF,UAAU,CAAC,IAAI,CAAC;QAChB;QACA,MAAMW,QAAQ,GAAG,MAAMxB,GAAG,CAACuB,UAAU,CAAC;QACtCV,UAAU,CAAC,KAAK,CAAC;QACjB,IAAIW,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE;UACrBR,SAAS,CAAES,UAAU,IAAK;YACxB,OAAO,CAAC,GAAGA,UAAU,EAAE,GAAGC,MAAM,CAACC,MAAM,CAACJ,QAAQ,CAACK,GAAG,CAAC,CAAC,CAAC,CAAC;UAC1D,CAAC,CAAC;QACJ,CAAC,MAAM;UACLV,UAAU,CAAC,KAAK,CAAC;QACnB;MACF,CAAC,CAAC,OAAOW,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAChBjB,UAAU,CAAC,KAAK,CAAC;QACjBE,QAAQ,CAAC,IAAI,CAAC;MAChB;IACF;IAEAK,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACV,IAAI,CAAC,CAAC;EAEV,OAAO;IACLE,OAAO;IACPE,KAAK;IACLE,MAAM;IACNE;EACF,CAAC;AACH;AAACP,EAAA,CA/CuBF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}